# –ë–ï–ö–ê–ü –ü–Ü–°–õ–Ø –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø –ü–†–û–ë–õ–ï–ú–ò –ó –ö–û–ú–ï–ù–¢–ê–†–Ø–ú–ò

## üìÖ –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è: 12 –ª–∏–ø–Ω—è 2025, 19:42 UTC

## üì¶ –§–∞–π–ª –±–µ–∫–∞–ø—É: `Bot1_backup_20250712_194234_COMMENT_FIX.tar.gz`

## üìä –†–æ–∑–º—ñ—Ä: 101M (—Å—Ç–∏—Å–Ω–µ–Ω–∏–π)

---

## üéØ –û–°–ù–û–í–ù–Ü –ó–ú–Ü–ù–ò –í –¶–¨–û–ú–£ –ë–ï–ö–ê–ü–Ü

### ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û: –ü—Ä–æ–±–ª–µ–º–∞ –∑ –æ–±—Ä–æ–±–Ω–∏–∫–∞–º–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ Telegram –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è–ª–∏—Å—è –¥–æ Jira —è–∫ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ
- **–ü—Ä–∏—á–∏–Ω–∞**: `global_registration_handler` –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞–≤ –≤—Å—ñ —Ç–µ–∫—Å—Ç–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ `comment_handler`
- **–†—ñ—à–µ–Ω–Ω—è**: –ó–º—ñ–Ω–µ–Ω–æ –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤ —É `handlers.py` - `comment_handler` —Ç–µ–ø–µ—Ä –º–∞—î –≤–∏—â–∏–π –ø—Ä—ñ–æ—Ä–∏—Ç–µ—Ç

### üîß –ó–º—ñ–Ω–∏ –≤ —Ñ–∞–π–ª–∞—Ö:

#### `/home/Bot1/src/handlers.py`
- **–†—è–¥–∫–∏ 1830-1860**: –ü–µ—Ä–µ—Å—Ç–∞–≤–ª–µ–Ω–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ —É —Ñ—É–Ω–∫—Ü—ñ—ó `register_handlers()`
- **–ó–º—ñ–Ω–∞ –ø–æ—Ä—è–¥–∫—É**: `comment_handler` —Ç–µ–ø–µ—Ä –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ø–µ—Ä–µ–¥ `global_registration_handler`
- **–õ–æ–≥—ñ–∫–∞**: `global_registration_handler` —Ç–µ–ø–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Å—Ç–∞–Ω —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

#### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:
- ‚úÖ –§—É–Ω–∫—Ü—ñ—è `add_comment_to_jira` –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω–∞ –æ–∫—Ä–µ–º–æ - –ø—Ä–∞—Ü—é—î (HTTP 201 Created)
- ‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∏–π –∑ –Ω–æ–≤–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
- ‚úÖ –°–µ—Ä–≤—ñ—Å –∞–∫—Ç–∏–≤–Ω–∏–π (PID 217574)

---

## üèóÔ∏è –°–¢–ê–ù –°–ò–°–¢–ï–ú–ò –ù–ê –ú–û–ú–ï–ù–¢ –ë–ï–ö–ê–ü–£

### –ê–∫—Ç–∏–≤–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏:
- ‚úÖ `telegram-bot.service` - –∞–∫—Ç–∏–≤–Ω–∏–π
- ‚úÖ Webhook —Å–µ—Ä–≤–µ—Ä - –ø–æ—Ä—Ç 9443
- ‚úÖ Telegram polling - –ø—Ä–∞—Ü—é—î

### –§–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞:
- ‚úÖ –õ–æ–≥–∏: `/home/Bot1/logs/bot.log`
- ‚úÖ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è: `/home/Bot1/config/`
- ‚úÖ –°—Ç–∞–Ω–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤: `/home/Bot1/user_states/`

### –í–∏–∫–ª—é—á–µ–Ω–æ –∑ –±–µ–∫–∞–ø—É:
- `venv/` - –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (150M ‚Üí 101M)
- `.git/` - git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
- `__pycache__/` - –∫–µ—à Python

---

## üîÑ –ü–û–ü–ï–†–ï–î–ù–Ü –ü–†–û–ë–õ–ï–ú–ò (–í–ò–†–Ü–®–ï–ù–Ü)

### 1. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∑ –≤–∫–ª–∞–¥–µ–Ω–Ω—è–º–∏ (–ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –±–µ–∫–∞–ø–∏)
- –ü–æ–¥–≤—ñ–π–Ω–∏–π `https://` –ø—Ä–µ—Ñ—ñ–∫—Å –≤ URL API
- –ü–æ–º–∏–ª–∫–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑ Jira
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–µ—Ä—Å—ñ—è—Ö

### 2. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—î—é
- –ö–æ–Ω—Ñ–ª—ñ–∫—Ç–∏ –≤ –æ–±—Ä–æ–±–Ω–∏–∫–∞—Ö —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
- –í–∏–ø—Ä–∞–≤–ª–µ–Ω–æ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –≤–µ—Ä—Å—ñ—è—Ö

### 3. ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏ (–¶–ï–ô –ë–ï–ö–ê–ü)
- `comment_handler` –Ω–µ –≤–∏–∫–ª–∏–∫–∞–≤—Å—è —á–µ—Ä–µ–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–æ–±–Ω–∏–∫—ñ–≤
- **–í–ò–ü–†–ê–í–õ–ï–ù–û –í –¶–¨–û–ú–£ –ë–ï–ö–ê–ü–Ü**

---

## üìã –§–£–ù–ö–¶–Ü–û–ù–ê–õ–¨–ù–Ü–°–¢–¨ –ù–ê –ú–û–ú–ï–ù–¢ –ë–ï–ö–ê–ü–£

### ‚úÖ –ü—Ä–∞—Ü—é—î:
- üöÄ –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á –≤ Jira
- üí¨ **–î–æ–¥–∞–≤–∞–Ω–Ω—è –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ–≤ –∑ Telegram –¥–æ Jira** (–í–ò–ü–†–ê–í–õ–ï–ù–û)
- üìé –ü—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤
- üì± –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É
- üë§ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- üîÑ –í–µ–±—Ö—É–∫–∏ –∑ Jira –¥–æ Telegram

### üîç –ü–æ—Ç—Ä–µ–±—É—î –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:
- –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ñ–æ—Ç–æ (–º–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ –∑ MIME —Ç–∏–ø–∞–º–∏)
- –í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏ Excel (–º–æ–∂–ª–∏–≤—ñ —Ç–∞–π–º–∞—É—Ç–∏)

---

## üöÄ –Ø–ö –í–Ü–î–ù–û–í–ò–¢–ò –ó –¶–¨–û–ì–û –ë–ï–ö–ê–ü–£

```bash
# 1. –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
sudo systemctl stop telegram-bot.service

# 2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –±–µ–∫–∞–ø –ø–æ—Ç–æ—á–Ω–æ—ó –≤–µ—Ä—Å—ñ—ó (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
cd /home && tar -czf current_backup_$(date +%Y%m%d_%H%M%S).tar.gz Bot1/

# 3. –í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ—Ç–æ—á–Ω—É –ø–∞–ø–∫—É (–û–ë–ï–†–ï–ñ–ù–û!)
sudo rm -rf /home/Bot1

# 4. –†–æ–∑–ø–∞–∫—É–≤–∞—Ç–∏ –±–µ–∫–∞–ø
cd /home && tar -xzf Bot1/backups/Bot1_backup_20250712_194234_COMMENT_FIX.tar.gz

# 5. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
cd /home/Bot1 && python3 -m venv venv && source venv/bin/activate && pip install -r requirements.txt

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
sudo systemctl start telegram-bot.service
sudo systemctl status telegram-bot.service
```

---

## üìû –ö–û–ù–¢–ê–ö–¢–ò –î–õ–Ø –ü–Ü–î–¢–†–ò–ú–ö–ò

- **Telegram**: @your_support_channel
- **Jira**: euromix.atlassian.net
- **–õ–æ–≥–∏**: `/home/Bot1/logs/bot.log`

---

## üè∑Ô∏è –¢–ï–ì–ò
`comment-fix` `handlers-order` `telegram-to-jira` `working-version` `july-2025`

---

**–°—Ç–≤–æ—Ä–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥ —á–∞—Å –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –∑ –∫–æ–º–µ–Ω—Ç–∞—Ä—è–º–∏**
