# –ê–í–¢–û–ó–ê–ü–£–°–ö TELEGRAM –ë–û–¢–ê - –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –ó–ê–í–ï–†–®–ï–ù–û

**–î–∞—Ç–∞:** 26 —á–µ—Ä–≤–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–í–¢–û–ó–ê–ü–£–°–ö –ù–ê–õ–ê–®–¢–û–í–ê–ù–û  

## üöÄ **–†–ï–ê–õ–Ü–ó–û–í–ê–ù–Ü –§–£–ù–ö–¶–Ü–á –ê–í–¢–û–ó–ê–ü–£–°–ö–£**

### ‚úÖ **1. SYSTEMD SERVICE**
- **–°–ª—É–∂–±–∞:** `telegram-bot.service`
- **–°—Ç–∞—Ç—É—Å:** Enabled (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å–∏—Å—Ç–µ–º–∏)
- **–ü–æ–ª—ñ—Ç–∏–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É:** Always (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–±–æ—è—Ö)
- **–ó–∞—Ç—Ä–∏–º–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É:** 10 —Å–µ–∫—É–Ω–¥
- **–†–æ–±–æ—á–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è:** `/home/Bot1`
- **–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á:** root
- **–õ–æ–≥—É–≤–∞–Ω–Ω—è:** –í —Ñ–∞–π–ª `/home/Bot1/logs/bot.log`

### ‚úÖ **2. –ú–û–ù–Ü–¢–û–†–ò–ù–ì –ó–î–û–†–û–í'—è (HEALTH MONITORING)**
- **–°–∫—Ä–∏–ø—Ç:** `bot_monitor.sh`
- **–§—É–Ω–∫—Ü—ñ—ó:**
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É systemd —Å–µ—Ä–≤—ñ—Å—É
  - HTTP health check –Ω–∞ endpoint `/rest/webhooks/ping`
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–±–æ—è—Ö
  - –î–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤ `/home/Bot1/logs/monitor.log`

### ‚úÖ **3. CRON –ú–û–ù–Ü–¢–û–†–ò–ù–ì**
- **–ß–∞—Å—Ç–æ—Ç–∞:** –ö–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏
- **–ö–æ–º–∞–Ω–¥–∞:** `/home/Bot1/bot_monitor.sh monitor`
- **–§—É–Ω–∫—Ü—ñ—è:** –î–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

### ‚úÖ **4. –ó–†–£–ß–ù–Ü –°–ö–†–ò–ü–¢–ò –£–ü–†–ê–í–õ–Ü–ù–ù–Ø**

#### **–û—Å–Ω–æ–≤–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è: `bot_control.sh`**
```bash
./bot_control.sh start          # –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
./bot_control.sh stop           # –ó—É–ø–∏–Ω–∏—Ç–∏ –±–æ—Ç–∞  
./bot_control.sh restart        # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
./bot_control.sh status         # –ü–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å
./bot_control.sh logs           # –ü–æ–∫–∞–∑–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ –ª–æ–≥–∏
./bot_control.sh follow-logs    # –í—ñ–¥—Å–ª—ñ–¥–∫–æ–≤—É–≤–∞—Ç–∏ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
```

#### **Systemd –∫–æ–º–∞–Ω–¥–∏:**
```bash
sudo systemctl start telegram-bot      # –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
sudo systemctl stop telegram-bot       # –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
sudo systemctl restart telegram-bot    # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤—ñ—Å
sudo systemctl status telegram-bot     # –ü–æ–∫–∞–∑–∞—Ç–∏ —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É
sudo journalctl -u telegram-bot -f     # –õ–æ–≥–∏ systemd –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
```

## üîß **–¢–ï–°–¢–£–í–ê–ù–ù–Ø –ê–í–¢–û–ó–ê–ü–£–°–ö–£**

### **–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**
‚úÖ **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ:** Enabled  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–±–æ—è—Ö:** –ü—Ä–∞—Ü—é—î (RestartSec=10s)  
‚úÖ **Health check –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:** –ü—Ä–∞—Ü—é—î  
‚úÖ **Cron –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥:** –ù–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ (–∫–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏)  
‚úÖ **HTTP endpoint –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞:** http://localhost:9443/rest/webhooks/ping  

### **–¢–µ—Å—Ç–æ–≤–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π –≤–∏–∫–æ–Ω–∞–Ω–æ:**
1. ‚úÖ Kill -9 –ø—Ä–æ—Ü–µ—Å—É ‚Üí systemd –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–≤
2. ‚úÖ –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—É ‚Üí –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—É ‚Üí –ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ  
4. ‚úÖ Cron –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ ‚Üí –¥–æ–¥–∞—Ç–∫–æ–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–¥–æ—Ä–æ–≤'—è

## üìä **–†–Ü–í–ù–Ü –ó–ê–•–ò–°–¢–£**

### **1-–π —Ä—ñ–≤–µ–Ω—å: Systemd (–æ—Å–Ω–æ–≤–Ω–∏–π)**
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç—å –æ—Å–Ω–æ–≤–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –±–æ—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î –ø—Ä–∏ –∞–≤–∞—Ä—ñ–π–Ω—ñ–π –∑—É–ø–∏–Ω—Ü—ñ
- –ü–æ–ª—ñ—Ç–∏–∫–∞: `Restart=always`, `RestartSec=10`

### **2-–π —Ä—ñ–≤–µ–Ω—å: Health Check Monitoring**
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–µ —Ç—ñ–ª—å–∫–∏ –ø—Ä–æ—Ü–µ—Å, –∞–ª–µ –π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
- HTTP –∑–∞–ø–∏—Ç –¥–æ webhook endpoint
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —è–∫—â–æ endpoint –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î

### **3-–π —Ä—ñ–≤–µ–Ω—å: Cron Backup Monitoring**  
- –ó–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∫–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏
- –î–æ–¥–∞—Ç–∫–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —è–∫—â–æ systemd "–∑–∞–≤–∏—Å–Ω–µ"
- –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π

## üìù **–õ–û–ì–£–í–ê–ù–ù–Ø –¢–ê –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê**

### **–§–∞–π–ª–∏ –ª–æ–≥—ñ–≤:**
- `/home/Bot1/logs/bot.log` - –û—Å–Ω–æ–≤–Ω—ñ –ª–æ–≥–∏ –±–æ—Ç–∞
- `/home/Bot1/logs/monitor.log` - –õ–æ–≥–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- `journalctl -u telegram-bot` - Systemd –ª–æ–≥–∏

### **–ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
./bot_control.sh status

# –û—Å—Ç–∞–Ω–Ω—ñ –ø–æ–¥—ñ—ó systemd
sudo journalctl -u telegram-bot --since "1 hour ago"

# –ê–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
tail -f /home/Bot1/logs/monitor.log

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É
./test_autostart.sh
```

## üéØ **–†–ï–ó–£–õ–¨–¢–ê–¢**

**–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø–æ–≤–Ω—ñ—Å—Ç—é –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ!** –ë–æ—Ç –±—É–¥–µ:

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è** –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç–∏—Å—è** –ø—Ä–∏ –±—É–¥—å-—è–∫–∏—Ö –∑–±–æ—è—Ö
3. **–ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏—Å—è** –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∑–¥–æ—Ä–æ–≤'—è –∫–æ–∂–Ω—ñ 2 —Ö–≤–∏–ª–∏–Ω–∏
4. **–õ–æ–≥—É–≤–∞—Ç–∏** –≤—Å—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### **–ì–∞—Ä–∞–Ω—Ç—ñ—ó —Ä–æ–±–æ—Ç–∏:**
- ‚úÖ –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞ ‚Üí –±–æ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
- ‚úÖ –ê–≤–∞—Ä—ñ–π–Ω–∞ –∑—É–ø–∏–Ω–∫–∞ –ø—Ä–æ—Ü–µ—Å—É ‚Üí systemd –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞ 10 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ó–∞–≤–∏—Å–∞–Ω–Ω—è webhook —Å–µ—Ä–≤–µ—Ä–∞ ‚Üí cron –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
- ‚úÖ –ü–æ–≤–Ω–∞ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ ‚Üí –ª–æ–≥–∏ —Ç–∞ —Å—Ç–∞—Ç—É—Å–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ production –∑ –ø–æ–≤–Ω–∏–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–æ–º!** üöÄ

---
*–°—Ç–≤–æ—Ä–µ–Ω–æ: 26 —á–µ—Ä–≤–Ω—è 2025*  
*–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫: –ù–ê–õ–ê–®–¢–û–í–ê–ù–û* ‚úÖ
