# –ó–í–Ü–¢: –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞

## –î–ê–¢–ê: 28 —á–µ—Ä–≤–Ω—è 2025 —Ä.

## –í–ò–Ø–í–õ–ï–ù–Ü –ü–†–û–ë–õ–ï–ú–ò

### 1. ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –≤ /start
**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –ë–æ—Ç –ø–µ—Ä–µ–≤—ñ—Ä—è–≤ `context.user_data["profile"]` –∑–∞–º—ñ—Å—Ç—å –ø–æ—à—É–∫—É –≤ Google Sheets
- –ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞ –∞–±–æ –Ω–æ–≤–æ–º—É `/start` –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤—Ç—Ä–∞—á–∞–ª–∏—Å—å
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–º—É—à–µ–Ω–∏–π –±—É–≤ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—å

### 2. ‚ùå –ó–∞–ø–∏—Ç –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—É –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–∞–≤—ñ—Ç—å –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –∑ –ø–æ–≤–Ω–∏–º –ø—Ä–æ—Ñ—ñ–ª–µ–º —É Google Sheets
- –ë–æ—Ç –∑–∞–ø–∏—Ç—É–≤–∞–≤ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª —ñ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–¥–∞—á—ñ
- –ü–æ—Ä—É—à—É–≤–∞–ª–∞—Å—å –ª–æ–≥—ñ–∫–∞ "–Ω–µ –∑–∞–ø–∏—Ç—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ, —è–∫—ñ –≤–∂–µ —î"

## –í–ò–ö–û–ù–ê–ù–Ü –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø

### ‚úÖ **1. –í–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ /start –∫–æ–º–∞–Ω–¥–∏**

**–ë—É–ª–æ:**
```python
profile = context.user_data.get("profile")
if profile and profile.get("telegram_id"):
    # –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –≤ context
else:
    # –®—É–∫–∞—Ç–∏ –≤ Google Sheets
```

**–°—Ç–∞–ª–æ:**
```python
# –ó–ê–í–ñ–î–ò —Å–ø–æ—á–∞—Ç–∫—É —à—É–∫–∞—î–º–æ –≤ Google Sheets –∑–∞ Telegram ID
res = find_user_by_telegram_id(user_id)
if res:
    # –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–Ω–∞–π–¥–µ–Ω–æ - –ø–æ–∫–∞–∑—É—î–º–æ –ø–æ–≤–Ω—ñ –¥–∞–Ω—ñ
    # –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –ø—Ä–æ—Ñ—ñ–ª—å –≤ context
else:
    # –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ–º–∞—î - –∑–∞–ø–∏—Ç—É—î–º–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é
```

### ‚úÖ **2. –ü–æ–∫—Ä–∞—â–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ**

**–ë—É–ª–æ:**
```python
if profile:
    # –ö–æ–ø—ñ—é–≤–∞—Ç–∏ –¥–∞–Ω—ñ —ñ –æ–¥—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –¥–æ —Å–µ—Ä–≤—ñ—Å—É
    # –ù–∞–≤—ñ—Ç—å —è–∫—â–æ –¥–µ—è–∫—ñ –¥–∞–Ω—ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ
```

**–°—Ç–∞–ª–æ:**
```python
if profile and profile.get("division") and profile.get("department"):
    # –ü–æ–≤–Ω—ñ –¥–∞–Ω—ñ - –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ —Å–µ—Ä–≤—ñ—Å—É
elif profile:
    # –ù–µ–ø–æ–≤–Ω—ñ –¥–∞–Ω—ñ - –¥–æ–ø–æ–≤–Ω—é—î–º–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è
    if not profile.get("division"):
        # –ó–∞–ø–∏—Ç—É—î–º–æ –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª
    elif not profile.get("department"):
        # –ó–∞–ø–∏—Ç—É—î–º–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç
```

## –¢–ï–•–ù–Ü–ß–ù–Ü –î–ï–¢–ê–õ–Ü

### –ó–º—ñ–Ω–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
1. **`async def start()`** - –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
2. **`async def create_issue_start()`** - –ø–æ–∫—Ä–∞—â–µ–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ñ—ñ–ª—é

### –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏ —Ç–µ–ø–µ—Ä:

#### –ü—Ä–∏ –∫–æ–º–∞–Ω–¥—ñ /start:
1. üîç **–ó–∞–≤–∂–¥–∏ —à—É–∫–∞—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ Google Sheets** –∑–∞ Telegram ID
2. ‚úÖ **–Ø–∫—â–æ –∑–Ω–∞–π–¥–µ–Ω–æ** - –ø–æ–∫–∞–∑—É—î–º–æ –ø–æ–≤–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ—Ñ—ñ–ª—é + —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–µ –º–µ–Ω—é
3. ‚ùå **–Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ** - –∑–∞–ø–∏—Ç—É—î–º–æ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

#### –ü—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–¥–∞—á—ñ:
1. üîç **–ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –ø–æ–≤–Ω–∏—Ö –¥–∞–Ω–∏—Ö** –≤ –ø—Ä–æ—Ñ—ñ–ª—ñ
2. ‚úÖ **–Ø–∫—â–æ —î division + department** - –æ–¥—Ä–∞–∑—É –ø–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –≤–∏–±–æ—Ä—É —Å–µ—Ä–≤—ñ—Å—É
3. ‚ö†Ô∏è **–Ø–∫—â–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ –¥–µ—è–∫—ñ –¥–∞–Ω—ñ** - –∑–∞–ø–∏—Ç—É—î–º–æ —Ç—ñ–ª—å–∫–∏ —Ç–µ, —á–æ–≥–æ –Ω–µ–º–∞—î
4. ‚ùå **–Ø–∫—â–æ –Ω–µ–º–∞—î –ø—Ä–æ—Ñ—ñ–ª—é** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö

## –†–ï–ó–£–õ–¨–¢–ê–¢–ò

### ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è UX:**
- –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –±—ñ–ª—å—à–µ –ù–ï –≤—Ç—Ä–∞—á–∞—é—Ç—å —Å–≤–æ—ó –¥–∞–Ω—ñ
- –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–≤–æ–¥–∏—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è —Ñ–æ—Ä–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ

### ‚úÖ **–õ–æ–≥—ñ—á–Ω–∞ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å:**
- `/start` –∑–∞–≤–∂–¥–∏ –ø–æ–∫–∞–∑—É—î –∞–∫—Ç—É–∞–ª—å–Ω—ñ –¥–∞–Ω—ñ –∑ Google Sheets
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –Ω–∞—è–≤–Ω—ñ –¥–∞–Ω—ñ –∑ –ø—Ä–æ—Ñ—ñ–ª—é
- –ó–∞–ø–∏—Ç—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ –ø–æ–ª—è

### ‚úÖ **–¢–µ—Ö–Ω—ñ—á–Ω–∞ —Å—Ç–∞–±—ñ–ª—å–Ω—ñ—Å—Ç—å:**
- –î–∞–Ω—ñ –∑–∞–≤–∂–¥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –∑ Google Sheets (–¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏)
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –Ω–µ–ø–æ–≤–Ω–∏—Ö –ø—Ä–æ—Ñ—ñ–ª—ñ–≤

## –õ–û–ì–ò –ü–Ü–î–¢–í–ï–†–î–ñ–ï–ù–ù–Ø

```
2025-06-28 12:55:21,987 - handlers - INFO - –®—É–∫–∞—î–º–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ Telegram ID: 533405905
2025-06-28 12:55:22,371 - handlers - INFO - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–Ω–∞–π–¥–µ–Ω–æ –∑–∞ Telegram ID: –ú–∞—Ä—Ç–∏–Ω–µ–Ω–∫–æ –û–ª–µ–≥ –í—ñ–∫—Ç–æ—Ä–æ–≤–∏—á
2025-06-28 12:55:22,510 - httpx - INFO - HTTP Request: POST .../sendMessage "HTTP/1.1 200 OK"
```

**–õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∞! ‚úÖ**
