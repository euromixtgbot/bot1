# üéØ –í–ò–ü–†–ê–í–õ–ï–ù–ê –ü–†–û–ë–õ–ï–ú–ê: –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–∞–π–ª–∏ –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö Jira

**–î–∞—Ç–∞:** 29 —á–µ—Ä–≤–Ω—è 2025, 01:05 UTC  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í–ò–†–Ü–®–ï–ù–û

## üîç –î–Ü–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú–ò

### –ü–æ—á–∞—Ç–∫–æ–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞:
- –§–∞–π–ª–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –∑ Telegram –¥–æ Jira —è–∫ –æ–∫—Ä–µ–º—ñ –≤–∫–ª–∞–¥–µ–Ω–Ω—è
- –ü–æ—Å–∏–ª–∞–Ω–Ω—è `[^filename]` —É –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö –Ω–µ –ø—Ä–∞—Ü—é–≤–∞–ª–∏
- –§–∞–π–ª–∏ –Ω–µ –±—É–ª–∏ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∏–º–∏ –≤ –∫–æ–º–µ–Ω—Ç–∞—Ä—è—Ö

### –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∏:
**–ù–ï–ü–†–ê–í–ò–õ–¨–ù–ê –í–ï–†–°–Ü–Ø JIRA API:**
- –§—É–Ω–∫—Ü—ñ—è `add_comment_with_file_reference_to_jira()` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∞ `add_comment_to_jira()` (API v3)
- **Jira API v3** –ù–ï –ø—ñ–¥—Ç—Ä–∏–º—É—î —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `[^filename]` –¥–ª—è –ø–æ—Å–∏–ª–∞–Ω—å –Ω–∞ —Ñ–∞–π–ª–∏
- **Jira API v2** –ü–Ü–î–¢–†–ò–ú–£–Ñ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `[^filename]` –¥–ª—è –ø–æ—Å–∏–ª–∞–Ω—å –Ω–∞ —Ñ–∞–π–ª–∏

## ‚úÖ –†–Ü–®–ï–ù–ù–Ø

### –ó–º—ñ–Ω–∞ –≤ `/home/Bot1/src/services.py`:
```python
# –ë–£–õ–û (API v3):
await add_comment_to_jira(issue_key, full_comment, None)

# –°–¢–ê–õ–û (API v2):
await add_comment_to_jira_v2(issue_key, full_comment, None)
```

### –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–º—ñ–Ω:
```python
async def add_comment_with_file_reference_to_jira(issue_key: str, comment: str, author_name: Optional[str] = None, 
                                                 filename: Optional[str] = None, file_content: Optional[bytes] = None) -> None:
    # ... –ø—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—É ...
    
    # –§–æ—Ä–º—É—î–º–æ –∫–æ–º–µ–Ω—Ç–∞—Ä –∑ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –Ω–∞ —Ñ–∞–π–ª (Jira v2 —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
    if filename:
        full_comment += f"\n\nüìé –ü—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω–æ —Ñ–∞–π–ª: [^{filename}]"
    
    # ‚úÖ –í–ò–ü–†–ê–í–õ–ï–ù–û: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ API v2 –∑–∞–º—ñ—Å—Ç—å v3
    await add_comment_to_jira_v2(issue_key, full_comment, None)
```

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

### –î–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- –§–∞–π–ª–∏: ‚ùå –û–∫—Ä–µ–º—ñ –≤–∫–ª–∞–¥–µ–Ω–Ω—è –±–µ–∑ –ø–æ—Å–∏–ª–∞–Ω—å
- –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ: ‚ùå `[^filename]` –Ω–µ –ø—Ä–∞—Ü—é–≤–∞–≤
- API: ‚ùå Jira v3 (–Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î —Ñ–∞–π–ª-–ø–æ—Å–∏–ª–∞–Ω–Ω—è)

### –ü—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:
- –§–∞–π–ª–∏: ‚úÖ –ü—Ä–∏–∫—Ä—ñ–ø–ª–µ–Ω—ñ –∑ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∏–º–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏
- –ö–æ–º–µ–Ω—Ç–∞—Ä—ñ: ‚úÖ `[^filename]` —Å—Ç–≤–æ—Ä—é—î –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è
- API: ‚úÖ Jira v2 (–ø—ñ–¥—Ç—Ä–∏–º—É—î —Ñ–∞–π–ª-–ø–æ—Å–∏–ª–∞–Ω–Ω—è)

## üìã –¢–ï–•–ù–Ü–ß–ù–Ü –î–ï–¢–ê–õ–Ü

### –†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ Jira API v2 —Ç–∞ v3:
- **API v2:** –ü—ñ–¥—Ç—Ä–∏–º—É—î wikimarkup, –≤–∫–ª—é—á–Ω–æ –∑ `[^filename]` —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º
- **API v3:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Atlassian Document Format (ADF), –ù–ï –ø—ñ–¥—Ç—Ä–∏–º—É—î `[^filename]`

### –ù–∞—è–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:
- `add_comment_to_jira()` - API v3 (ADF —Ñ–æ—Ä–º–∞—Ç)
- `add_comment_to_jira_v2()` - API v2 (wikimarkup —Ñ–æ—Ä–º–∞—Ç)
- `add_comment_with_file_reference_to_jira()` - —Ç–µ–ø–µ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î API v2

## üöÄ –°–¢–ê–¢–£–° –ë–û–¢–ê

**–ü—Ä–æ—Ü–µ—Å:** ‚úÖ –ó–∞–ø—É—â–µ–Ω–∏–π (PID: 7441)  
**API:** ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ Telegram  
**–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª:** ‚úÖ –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ñ–∞–π–ª–∏ –ø—Ä–∞—Ü—é—é—Ç—å —á–µ—Ä–µ–∑ Jira API v2

---

**–í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ:** 29.06.2025 01:05 UTC  
**–ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–∏–π:** ‚úÖ –£—Å–ø—ñ—à–Ω–æ  
**–ì–æ—Ç–æ–≤–∏–π –¥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:** ‚úÖ –¢–∞–∫
