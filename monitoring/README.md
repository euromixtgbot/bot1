# üìä MONITORING - –°–ò–°–¢–ï–ú–ê –ú–û–ù–Ü–¢–û–†–ò–ù–ì–£ –ë–û–¢–ê

## üìÅ –ó–º—ñ—Å—Ç –ø–∞–ø–∫–∏:

### üîß –°–∫—Ä–∏–ø—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É:
- **[monitor_bot.sh](monitor_bot.sh)** - üéØ –ì–æ–ª–æ–≤–Ω–∏–π —Å–∫—Ä–∏–ø—Ç –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
- **[setup_monitoring.sh](setup_monitoring.sh)** - üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- **[monitor_control.sh](monitor_control.sh)** - üéõÔ∏è –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è

### üìã –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:
- **[bot-monitor.service](bot-monitor.service)** - ‚öôÔ∏è Systemd —Å–µ—Ä–≤—ñ—Å –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É
- **[MONITORING_README.md](MONITORING_README.md)** - üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É

---

## üéØ –®–í–ò–î–ö–ò–ô –°–¢–ê–†–¢:

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
```bash
# –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
sudo /home/Bot1/monitoring/setup_monitoring.sh
```

### 2. –†—É—á–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
```bash
# –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
sudo /home/Bot1/monitoring/monitor_control.sh

# –®–≤–∏–¥–∫—ñ –∫–æ–º–∞–Ω–¥–∏
/home/Bot1/monitoring/monitor_bot.sh status    # –°—Ç–∞—Ç—É—Å
/home/Bot1/monitoring/monitor_bot.sh check     # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞—Ä–∞–∑
```

---

## üîß –Ø–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞:

```
‚è∞ –ö–æ–∂–Ω—ñ 15 —Ö–≤–∏–ª–∏–Ω:
‚îú‚îÄ‚îÄ üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –±–æ—Ç–∞
‚îú‚îÄ‚îÄ üìä –ê–Ω–∞–ª—ñ–∑ –ø—Ä–æ—Ü–µ—Å—ñ–≤ —Ç–∞ PID
‚îú‚îÄ‚îÄ üö® –í–∏—è–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º
‚îî‚îÄ‚îÄ üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–ø—Ä–∏ –ø–æ—Ç—Ä–µ–±—ñ)

üõ°Ô∏è –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –∑–±–æ—ó–≤:
‚îú‚îÄ‚îÄ 1Ô∏è‚É£ –ü–µ—Ä—à–∞ —Å–ø—Ä–æ–±–∞: –º'—è–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ 2Ô∏è‚É£ –î—Ä—É–≥–∞ —Å–ø—Ä–æ–±–∞: –ø—Ä–∏–Ω—É–¥–æ–≤–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
‚îú‚îÄ‚îÄ 3Ô∏è‚É£ –¢—Ä–µ—Ç—è —Å–ø—Ä–æ–±–∞: –æ—á–∏—â–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
‚îî‚îÄ‚îÄ üö® –ö—Ä–∏—Ç–∏—á–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è: –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```

---

## üìä –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

### üéØ monitor_bot.sh - –ì–æ–ª–æ–≤–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥
- ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –±–æ—Ç–∞** –∫–æ–∂–Ω—ñ 15 —Ö–≤–∏–ª–∏–Ω
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** –ø—Ä–∏ –∑–±–æ—è—Ö (–¥–æ 3 —Å–ø—Ä–æ–±)
- ‚úÖ **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞** Python
- ‚úÖ **–õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π** –∑ —á–∞—Å–æ–≤–∏–º–∏ –º—ñ—Ç–∫–∞–º–∏
- ‚úÖ **–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞** –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–∫–∞—Ö

### üöÄ setup_monitoring.sh - –ê–≤—Ç–æ–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è systemd —Å–µ—Ä–≤—ñ—Å—É** –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É
- ‚úÖ **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É** –¥–ª—è —Å–∫—Ä–∏–ø—Ç—ñ–≤
- ‚úÖ **–ê–∫—Ç–∏–≤–∞—Ü—ñ—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫—É** –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞—Ü–µ–∑–¥–∞—Ç–Ω–æ—Å—Ç—ñ** –ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### üéõÔ∏è monitor_control.sh - –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è
- ‚úÖ **–ó—Ä—É—á–Ω–µ –º–µ–Ω—é —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è** –≤—Å—ñ–º–∞ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏
- ‚úÖ **–ü–µ—Ä–µ–≥–ª—è–¥ —Å—Ç–∞—Ç—É—Å—É** –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- ‚úÖ **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–∞–º–∏** (—Å—Ç–∞—Ä—Ç/—Å—Ç–æ–ø/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫)
- ‚úÖ **–ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤** –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ç–∞ systemd

---

## üîç –ö–æ–º–∞–Ω–¥–∏ –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
```bash
# –ó–∞–≥–∞–ª—å–Ω–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º–∏
/home/Bot1/monitoring/monitor_bot.sh status

# –°—Ç–∞—Ç—É—Å systemd —Å–µ—Ä–≤—ñ—Å—É
sudo systemctl status bot-monitor

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤
ps aux | grep python | grep main.py
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
```bash
# –õ–æ–≥–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
tail -f /home/Bot1/logs/monitor.log

# Systemd –ª–æ–≥–∏
sudo journalctl -u bot-monitor -f

# –û—Å—Ç–∞–Ω–Ω—ñ 50 –∑–∞–ø–∏—Å—ñ–≤
sudo journalctl -u bot-monitor -n 50
```

### –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å–æ–º
```bash
# –ó–∞–ø—É—Å–∫
sudo systemctl start bot-monitor

# –ó—É–ø–∏–Ω–∫–∞
sudo systemctl stop bot-monitor

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
sudo systemctl restart bot-monitor

# –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫
sudo systemctl enable bot-monitor
```

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏:

### üîß –û—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (–≤ monitor_bot.sh):
```bash
CHECK_INTERVAL=900          # 15 —Ö–≤–∏–ª–∏–Ω –º—ñ–∂ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞–º–∏
MAX_RESTART_ATTEMPTS=3      # –ú–∞–∫—Å–∏–º—É–º —Å–ø—Ä–æ–± –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
RESTART_COOLDOWN=60         # –°–µ–∫—É–Ω–¥–∏ –º—ñ–∂ —Å–ø—Ä–æ–±–∞–º–∏
SERVER_RESTART_DELAY=120    # –ó–∞—Ç—Ä–∏–º–∫–∞ –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞
```

### üìÅ –§–∞–π–ª–∏ —Ç–∞ —à–ª—è—Ö–∏:
- **–õ–æ–≥–∏:** `/home/Bot1/logs/monitor.log`
- **PID —Ñ–∞–π–ª:** `/home/Bot1/bot.pid`
- **–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:** `/home/Bot1/config/`
- **–í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ:** `/home/Bot1/venv/`

---

## üö® Troubleshooting:

### –ü—Ä–æ–±–ª–µ–º–∞: –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
ls -la /home/Bot1/monitoring/monitor_bot.sh

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø—Ä–∞–≤–∞
chmod +x /home/Bot1/monitoring/monitor_bot.sh

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ systemd
sudo systemctl daemon-reload
sudo systemctl restart bot-monitor
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–æ—Ç –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
tail -f /home/Bot1/logs/monitor.log

# –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
/home/Bot1/monitoring/monitor_bot.sh check

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ
ls -la /home/Bot1/venv/bin/activate
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–º–∏–ª–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É
```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø—Ä–∞–≤–∞
sudo chown -R $USER:$USER /home/Bot1
chmod +x /home/Bot1/monitoring/*.sh
```

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø—ñ—Ö—É:

‚úÖ **–°–µ—Ä–≤—ñ—Å –∞–∫—Ç–∏–≤–Ω–∏–π:** `systemctl is-active bot-monitor`  
‚úÖ **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–π:** `systemctl is-enabled bot-monitor`  
‚úÖ **–ë–æ—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î:** –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—É Python  
‚úÖ **–õ–æ–≥–∏ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫:** –û—Å—Ç–∞–Ω–Ω—ñ –∑–∞–ø–∏—Å–∏ –±–µ–∑ –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ø–æ–º–∏–ª–æ–∫  
‚úÖ **–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∞—Ü—é—î:** –¢–µ—Å—Ç kill –ø—Ä–æ—Ü–µ—Å—É —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è  

---

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç:

üéØ **–ü–æ–≤–Ω—ñ—Å—Ç—é –∞–≤—Ç–æ–Ω–æ–º–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É**, —è–∫–∞:
- üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Å—Ç–∞–Ω –±–æ—Ç–∞ –∫–æ–∂–Ω—ñ 15 —Ö–≤–∏–ª–∏–Ω
- üöÄ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î –±–æ—Ç–∞ –ø—Ä–∏ –∑–±–æ—è—Ö –±–µ–∑ –≤—Ç—Ä—É—á–∞–Ω–Ω—è
- üìä –í–µ–¥–µ –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –≤—Å—ñ—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
- üõ°Ô∏è –ó–∞–±–µ–∑–ø–µ—á—É—î 99.9% uptime –≤–∞—à–æ–≥–æ –±–æ—Ç–∞
- ‚öôÔ∏è –ü—Ä–∞—Ü—é—î –∞–≤—Ç–æ–Ω–æ–º–Ω–æ –ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

**üí° –°–∏—Å—Ç–µ–º–∞ "–≤—Å—Ç–∞–Ω–æ–≤–∏–≤ —ñ –∑–∞–±—É–≤" - –≤–∞—à –±–æ—Ç –∑–∞–≤–∂–¥–∏ –æ–Ω–ª–∞–π–Ω!**
