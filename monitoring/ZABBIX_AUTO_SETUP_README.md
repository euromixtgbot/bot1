# ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Zabbix –¥–ª—è Telegram Bot

## üìã –ó–º—ñ—Å—Ç
- [–®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç](#—à–≤–∏–¥–∫–∏–π-—Å—Ç–∞—Ä—Ç)
- [–©–æ –†–æ–±–∏—Ç—å –°–∫—Ä–∏–ø—Ç](#—â–æ-—Ä–æ–±–∏—Ç—å-—Å–∫—Ä–∏–ø—Ç)
- [–†—É—á–Ω–µ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è](#—Ä—É—á–Ω–µ-–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
- [–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –†–æ–±–æ—Ç–∏](#–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞-—Ä–æ–±–æ—Ç–∏)
- [–ß–∞—Å—Ç—ñ –ü–∏—Ç–∞–Ω–Ω—è](#—á–∞—Å—Ç—ñ-–ø–∏—Ç–∞–Ω–Ω—è)

---

## üöÄ –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
cd /home/Bot1/monitoring

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
./zabbix_auto_setup.sh
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î:**
- ‚úÖ –•–æ—Å—Ç –¥–ª—è –±–æ—Ç–∞ (bot02)
- ‚úÖ 10 items –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É
- ‚úÖ 5 triggers –¥–ª—è —Å–ø–æ–≤—ñ—â–µ–Ω—å
- ‚úÖ Dashboard –∑ –≤—ñ–¥–∂–µ—Ç–∞–º–∏

**–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** ~5-10 —Å–µ–∫—É–Ω–¥

---

## üìä –©–æ –†–æ–±–∏—Ç—å –°–∫—Ä–∏–ø—Ç

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –°–∏—Å—Ç–µ–º–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –∑–∞–ø—É—â–µ–Ω–æ Zabbix Server
- –ê–≤—Ç–æ—Ä–∏–∑—É—î—Ç—å—Å—è –≤ API (Admin/zabbix)

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –•–æ—Å—Ç–∞
```
–ù–∞–∑–≤–∞:    bot02
–û–ø–∏—Å:     Bot02 - Telegram Bot Monitoring
IP:       127.0.0.1:10050
–ì—Ä—É–ø–∞:    Linux servers
–®–∞–±–ª–æ–Ω:   Linux by Zabbix agent active
```

### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Items (–ü–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É)

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ö–ª—é—á | –û–ø–∏—Å | –Ü–Ω—Ç–µ—Ä–≤–∞–ª |
|----------|------|------|----------|
| Bot Service Status | `bot.status` | –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤—ñ—Å—É –±–æ—Ç–∞ | 30 —Å–µ–∫ |
| Bot Active Users | `bot.users.count` | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ | 30 —Å–µ–∫ |
| Bot Memory (KB) | `bot.memory` | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ | 30 —Å–µ–∫ |
| Bot CPU Usage | `bot.cpu` | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞ | 30 —Å–µ–∫ |
| Bot Monitor Status | `bot.monitor.status` | –°—Ç–∞—Ç—É—Å –º–æ–Ω—ñ—Ç–æ—Ä–∞ –±–æ—Ç–∞ | 30 —Å–µ–∫ |
| Bot Uptime | `bot.uptime` | –ß–∞—Å —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞ | 30 —Å–µ–∫ |
| Bot Log Errors | `bot.log.errors` | –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–æ–º–∏–ª–æ–∫ —É –ª–æ–≥–∞—Ö | 30 —Å–µ–∫ |
| Bot Log Size | `bot.log.size` | –†–æ–∑–º—ñ—Ä log-—Ñ–∞–π–ª—É | 30 —Å–µ–∫ |
| Nginx Status | `nginx.status` | –°—Ç–∞—Ç—É—Å Nginx | 30 —Å–µ–∫ |
| Bot Disk Usage | `disk.bot.usage` | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–∏—Å–∫—É | 30 —Å–µ–∫ |

### 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Triggers (–°–ø–æ–≤—ñ—â–µ–Ω—å)

| Trigger | –£–º–æ–≤–∞ | –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç | –û–ø–∏—Å |
|---------|-------|-----------|------|
| Bot service is down | `bot.status != "active"` | üî¥ High | –ë–æ—Ç –Ω–µ –ø—Ä–∞—Ü—é—î |
| Bot monitor is down | `bot.monitor.status != "active"` | üî¥ High | –ú–æ–Ω—ñ—Ç–æ—Ä –Ω–µ –ø—Ä–∞—Ü—é—î |
| Nginx is down | `nginx.status != "active"` | üî¥ High | Nginx –Ω–µ –ø—Ä–∞—Ü—é—î |
| High memory usage | `bot.memory > 100000` | üü° Average | –í–∏—Å–æ–∫–∞ –ø–∞–º'—è—Ç—å (>100 MB) |
| Too many errors | `bot.log.errors > 10` | üü° Average | –ë–∞–≥–∞—Ç–æ –ø–æ–º–∏–ª–æ–∫ —É –ª–æ–≥–∞—Ö |

### 5. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Dashboard

**–ù–∞–∑–≤–∞:** Bot Monitoring Dashboard

**–í—ñ–¥–∂–µ—Ç–∏:**
- üìä Bot Status (—Å—Ç–∞—Ç—É—Å –±–æ—Ç–∞)
- üìä Monitor Status (—Å—Ç–∞—Ç—É—Å –º–æ–Ω—ñ—Ç–æ—Ä–∞)
- üìä Nginx Status (—Å—Ç–∞—Ç—É—Å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞)
- üë• Active Users (–∞–∫—Ç–∏–≤–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ)
- üíæ Memory Usage (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ)

---

## üîß –†—É—á–Ω–µ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–Ø–∫—â–æ –≤–∏ –∑–º—ñ–Ω–∏–ª–∏ –ø–∞—Ä–æ–ª—å –∞–±–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É:

### 1. –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –°–∫—Ä–∏–ø—Ç–∞

```bash
nano /home/Bot1/monitoring/zabbix_auto_setup.sh
```

–ó–º—ñ–Ω—ñ—Ç—å —Ä—è–¥–∫–∏:
```python
USERNAME = "Admin"
PASSWORD = "–≤–∞—à_–Ω–æ–≤–∏–π_–ø–∞—Ä–æ–ª—å"  # –ó–º—ñ–Ω—ñ—Ç—å —Ü–µ
```

### 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Python API –ù–∞–ø—Ä—è–º—É

```python
import requests

ZABBIX_URL = "http://127.0.0.1:8080/zabbix/api_jsonrpc.php"

# –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
auth_data = {
    "jsonrpc": "2.0",
    "method": "user.login",
    "params": {"username": "Admin", "password": "zabbix"},
    "id": 1
}
response = requests.post(ZABBIX_URL, json=auth_data)
auth_token = response.json()['result']

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ auth_token –¥–ª—è —ñ–Ω—à–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤
```

---

## ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –†–æ–±–æ—Ç–∏

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ß–µ—Ä–µ–∑ –í–µ–±-–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```
–í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:
http://157.180.46.236:8080/zabbix

–õ–æ–≥—ñ–Ω:    Admin
–ü–∞—Ä–æ–ª—å:   zabbix (–∞–±–æ –≤–∞—à –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å)
```

### 2. –ü–µ—Ä–µ–≥–ª—è–¥ –î–∞–Ω–∏—Ö

**–°–ø–æ—Å—ñ–± 1: Latest Data**
```
Monitoring ‚Üí Latest data
–§—ñ–ª—å—Ç—Ä: bot02
```

**–°–ø–æ—Å—ñ–± 2: Dashboard**
```
Monitoring ‚Üí Dashboards ‚Üí Bot Monitoring Dashboard
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Triggers

```
Monitoring ‚Üí Problems
```

–¢—É—Ç –±—É–¥—É—Ç—å –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏—Å—è –∞–∫—Ç–∏–≤–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏.

### 4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ß–µ—Ä–µ–∑ CLI

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∞–Ω–∏—Ö —ñ–∑ Zabbix Agent
zabbix_agentd -t bot.status
zabbix_agentd -t bot.users.count
zabbix_agentd -t bot.memory

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–±–æ—Ä—É –¥–∞–Ω–∏—Ö (—á–µ—Ä–µ–∑ MySQL)
mysql -u zabbix -p zabbix << EOF
SELECT h.host, i.name, i.lastvalue
FROM items i
JOIN hosts h ON h.hostid = i.hostid
WHERE h.host = 'bot02'
LIMIT 10;
EOF
```

---

## üîê –ó–º—ñ–Ω–∞ –ü–∞—Ä–æ–ª—è –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** –ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—å –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –≤—Ö–æ–¥—É!

### –ß–µ—Ä–µ–∑ –í–µ–±-–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
1. User icon (–ø—Ä–∞–≤–∏–π –≤–µ—Ä—Ö–Ω—ñ–π –∫—É—Ç) ‚Üí **Profile**
2. **Password** ‚Üí –í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
3. **Update**

### –ß–µ—Ä–µ–∑ CLI:
```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ zabbix_server —É—Ç–∏–ª—ñ—Ç—É
zabbix_server -R user.update --user Admin --password "–Ω–æ–≤–∏–π_–ø–∞—Ä–æ–ª—å"
```

---

## ‚ùì –ß–∞—Å—Ç—ñ –ü–∏—Ç–∞–Ω–Ω—è

### Q: –°–∫—Ä–∏–ø—Ç –Ω–µ –º–æ–∂–µ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è
**A:** –í–∏ –≤–∂–µ –∑–º—ñ–Ω–∏–ª–∏ –ø–∞—Ä–æ–ª—å. –í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç —ñ –≤–∫–∞–∂—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å.

### Q: Items –Ω–µ –∑–±–∏—Ä–∞—é—Ç—å –¥–∞–Ω—ñ
**A:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Zabbix Agent:
```bash
systemctl status zabbix-agent2
zabbix_agentd -t bot.status
```

### Q: –Ø–∫ –¥–æ–¥–∞—Ç–∏ email-—Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è?
**A:** 
1. Administration ‚Üí Media types ‚Üí Email
2. Administration ‚Üí Users ‚Üí Admin ‚Üí Media
3. Configuration ‚Üí Actions ‚Üí Create action

### Q: Dashboard –ø–æ—Ä–æ–∂–Ω—ñ–π
**A:** –ü–æ—á–µ–∫–∞–π—Ç–µ 30-60 —Å–µ–∫—É–Ω–¥ –¥–ª—è –∑–±–æ—Ä—É –ø–µ—Ä—à–∏—Ö –¥–∞–Ω–∏—Ö.

### Q: –Ø–∫ –≤–∏–¥–∞–ª–∏—Ç–∏ –≤—Å–µ —ñ –ø–æ—á–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É?
**A:**
```bash
# –í–∏–¥–∞–ª–∏—Ç–∏ —Ö–æ—Å—Ç (–≤–∏–¥–∞–ª—è—î –≤—Å—ñ items, triggers, dashboard)
mysql -u zabbix -p zabbix << EOF
DELETE FROM hosts WHERE host = 'bot02';
EOF

# –ü–æ—Ç—ñ–º –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –∑–Ω–æ–≤—É
./zabbix_auto_setup.sh
```

---

## üìö –î–æ–¥–∞—Ç–∫–æ–≤–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [ZABBIX_SETUP_GUIDE.md](./ZABBIX_SETUP_GUIDE.md) - –¢–µ—Ö–Ω—ñ—á–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- [ZABBIX_QUICK_START.md](./ZABBIX_QUICK_START.md) - –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫
- [–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è Zabbix](https://www.zabbix.com/documentation/7.0)

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –í–∏–∫–æ–Ω–∞–Ω–Ω—è

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫—Ä–∏–ø—Ç–∞ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ:

```
============================================================
‚úÖ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!
============================================================

üìä –©–æ –±—É–ª–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ:
  ‚Ä¢ –•–æ—Å—Ç: bot02 (ID: 10674)
  ‚Ä¢ Items: 10
  ‚Ä¢ Triggers: 5
  ‚Ä¢ Dashboard: Bot Monitoring Dashboard

üåê –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
   http://157.180.46.236:8080/zabbix

üìä –ü–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö:
   Monitoring ‚Üí Latest data ‚Üí bot02
   Monitoring ‚Üí Dashboards ‚Üí Bot Monitoring Dashboard

üîê –í–ê–ñ–õ–ò–í–û:
   –ó–º—ñ–Ω—ñ—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞!
   User icon ‚Üí Profile ‚Üí Password
```

---

## üîÑ –ü–æ–≤—Ç–æ—Ä–Ω–µ –ó–∞–ø—É—Å–∫

–°–∫—Ä–∏–ø—Ç –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –±–∞–≥–∞—Ç–æ —Ä–∞–∑—ñ–≤ - –≤—ñ–Ω:
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—è—î —ñ—Å–Ω—É—é—á—ñ –æ–±'—î–∫—Ç–∏
- ‚úÖ –ù–µ —Å—Ç–≤–æ—Ä—é—î –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤
- ‚úÖ –î–æ–¥–∞—î —Ç—ñ–ª—å–∫–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏

---

**–í–µ—Ä—Å—ñ—è:** 1.0  
**–î–∞—Ç–∞:** 18 –ª–∏—Å—Ç–æ–ø–∞–¥–∞ 2025  
**–ê–≤—Ç–æ—Ä:** Bot1 Monitoring Team
