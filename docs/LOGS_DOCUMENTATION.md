# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Å–∏—Å—Ç–µ–º–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è Telegram Bot

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** 01.10.2025  
**–í–µ—Ä—Å—ñ—è:** 1.0  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  

---

## üìã –ó–º—ñ—Å—Ç
1. [–û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏](#–æ–≥–ª—è–¥-—Å–∏—Å—Ç–µ–º–∏)
2. [–û—Å–Ω–æ–≤–Ω—ñ log —Ñ–∞–π–ª–∏](#–æ—Å–Ω–æ–≤–Ω—ñ-log-—Ñ–∞–π–ª–∏)
3. [Backup —Ñ–∞–π–ª–∏](#backup-—Ñ–∞–π–ª–∏)
4. [–°–ª—É–∂–±–æ–≤—ñ —Ñ–∞–π–ª–∏](#—Å–ª—É–∂–±–æ–≤—ñ-—Ñ–∞–π–ª–∏)
5. [–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è](#–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è)
6. [–ê—Ä—Ö—ñ–≤–Ω—ñ –ª–æ–≥–∏](#–∞—Ä—Ö—ñ–≤–Ω—ñ-–ª–æ–≥–∏)
7. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó)

---

## üéØ –û–≥–ª—è–¥ —Å–∏—Å—Ç–µ–º–∏

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **RotatingFileHandler** –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é —Ä–æ—Ç–∞—Ü—ñ—î—é –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É —Ñ–∞–π–ª—É. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î:

- ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –ª–æ–≥—ñ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è backup —Ñ–∞–π–ª—ñ–≤
- ‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –¥–æ 10 —Ñ–∞–π–ª—ñ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–∞–π—Å—Ç–∞—Ä—ñ—à–∏—Ö backup

### –ö–ª—é—á–æ–≤—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
- **bot.log**: max 10MB, 10 backups
- **webhook.log**: max 5MB, 5 backups
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è**: —â–æ–¥–Ω—è –æ 2:00 AM
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—è**: —â–æ–¥–Ω—è –æ 3:00 AM

---

## üìù –û—Å–Ω–æ–≤–Ω—ñ log —Ñ–∞–π–ª–∏

### 1. `bot.log`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ì–æ–ª–æ–≤–Ω–∏–π –ª–æ–≥ —Ñ–∞–π–ª Telegram –±–æ—Ç–∞

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- –ó–∞–ø—É—Å–∫ —Ç–∞ –∑—É–ø–∏–Ω–∫–∞ –±–æ—Ç–∞
- –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –í–∑–∞—î–º–æ–¥—ñ—è –∑ Telegram API
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–¥–∞—á –≤ Jira
- –û–±—Ä–æ–±–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ü–æ–º–∏–ª–∫–∏ —Ç–∞ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```python
# –§–∞–π–ª: src/main.py
RotatingFileHandler(
    'logs/bot.log',
    maxBytes=10*1024*1024,  # 10MB
    backupCount=10,         # –ú–∞–∫—Å–∏–º—É–º 10 backup —Ñ–∞–π–ª—ñ–≤
    encoding='utf-8'
)
```

**–†—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è:** INFO  
**–§–æ—Ä–º–∞—Ç:**
```
2025-10-01 16:16:20,666 - __main__ - INFO - ‚úÖ –ë–æ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–ø—É—â–µ–Ω
2025-10-01 16:16:20,666 - src.handlers - INFO - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã /start
```

**–†–æ—Ç–∞—Ü—ñ—è:**
- –ü—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ 10MB ‚Üí —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `bot.log.1`
- –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ backups –∑–º—ñ—â—É—é—Ç—å—Å—è: `bot.log.1` ‚Üí `bot.log.2`, —Ç–æ—â–æ
- –ù–∞–π—Å—Ç–∞—Ä—ñ—à–∏–π `bot.log.10` –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è

**–ú–æ–¥—É–ª—ñ —â–æ –ø–∏—à—É—Ç—å —É —Ü–µ–π –ª–æ–≥:**
- `src/main.py` - –æ—Å–Ω–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞
- `src/handlers.py` - –æ–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥
- `src/services.py` - –≤–∑–∞—î–º–æ–¥—ñ—è –∑ Jira
- `src/user_state_service.py` - —Å—Ç–∞–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- `src/user_management_service.py` - —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- `src/attachment_processor.py` - –æ–±—Ä–æ–±–∫–∞ —Ñ–∞–π–ª—ñ–≤

**–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∞–∂–ª–∏–≤–∏—Ö –ø–æ–¥—ñ–π:**
```log
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
2025-10-01 16:16:19,358 - __main__ - INFO - ====== –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ ======

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
2025-10-01 16:16:20,666 - __main__ - INFO - –ë–æ—Ç —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

# Webhook —Å–µ—Ä–≤–µ—Ä
2025-10-01 16:16:20,666 - __main__ - INFO - Webhook —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ 0.0.0.0:9443

# –ü–æ–º–∏–ª–∫–∏
2025-10-01 16:20:15,123 - src.services - ERROR - Failed to create Jira issue: Connection timeout
```

**–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É:** 13 KB (–ø–æ—Ç–æ—á–Ω–∏–π)  
**–û—á—ñ–∫—É–≤–∞–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è:** ~1-2 MB/–¥–µ–Ω—å

---

### 2. `webhook.log`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –õ–æ–≥—É–≤–∞–Ω–Ω—è webhook –∑–∞–ø–∏—Ç—ñ–≤ –≤—ñ–¥ Jira

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- –í—Ö—ñ–¥–Ω—ñ webhook –∑–∞–ø–∏—Ç–∏ –≤—ñ–¥ Jira
- –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π: issue_updated, comment_created, attachment_created
- –í–∞–ª—ñ–¥–∞—Ü—ñ—è webhook –¥–∞–Ω–∏—Ö
- Security middleware (IP whitelist, rate limiting)
- –ü–æ–º–∏–ª–∫–∏ –æ–±—Ä–æ–±–∫–∏ webhook

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```python
# –§–∞–π–ª: src/jira_webhooks2.py
RotatingFileHandler(
    'logs/webhook.log',
    maxBytes=5*1024*1024,   # 5MB
    backupCount=5,          # –ú–∞–∫—Å–∏–º—É–º 5 backup —Ñ–∞–π–ª—ñ–≤
    encoding='utf-8'
)
```

**–†—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è:** INFO  
**–§–æ—Ä–º–∞—Ç:**
```
2025-10-01 16:18:30,123 - src.jira_webhooks2 - INFO - –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ—ó: jira:issue_updated
2025-10-01 16:18:30,456 - src.jira_webhooks2 - WARNING - üö´ Blocked request from non-whitelisted IP: 167.94.138.171
```

**–†–æ—Ç–∞—Ü—ñ—è:**
- –ü—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ 5MB ‚Üí —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è `webhook.log.1`
- –ú–∞–∫—Å–∏–º—É–º 5 backup —Ñ–∞–π–ª—ñ–≤
- –°—Ç–∞—Ä—ñ—à–∏–π `webhook.log.5` –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è

**–ü–æ–¥—ñ—ó —â–æ –ª–æ–≥—É—é—Ç—å—Å—è:**
- `jira:issue_updated` - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–¥–∞—á—ñ
- `comment_created` - –Ω–æ–≤–∏–π –∫–æ–º–µ–Ω—Ç–∞—Ä
- `jira:issue_created` - –Ω–æ–≤–∞ –∑–∞–¥–∞—á–∞
- `attachment_created` - –Ω–æ–≤–∏–π —Ñ–∞–π–ª
- `issue_property_set` - –∑–º—ñ–Ω–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π (INFO only)
- `issuelink_created` - –∑–≤'—è–∑—É–≤–∞–Ω–Ω—è –∑–∞–¥–∞—á (INFO only)
- `worklog_*` - —Ä–æ–±–æ—Ç–∞ –∑ worklogs (INFO only)

**Security –ø–æ–¥—ñ—ó:**
```log
# –ó–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π IP
2025-10-01 15:26:25,692 - src.jira_webhooks2 - WARNING - üö´ Blocked request from non-whitelisted IP: 167.94.138.171 (path: /rest/webhooks/webhook1)

# Rate limit exceeded
2025-10-01 15:30:15,123 - src.jira_webhooks2 - WARNING - üö´ Rate limit exceeded for IP 192.168.1.100: 101 requests in 60s. Blacklisted for 3600s
```

**–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É:** 17 KB (–ø–æ—Ç–æ—á–Ω–∏–π)  
**–û—á—ñ–∫—É–≤–∞–Ω–µ –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è:** ~0.5-1 MB/–¥–µ–Ω—å

---

## üíæ Backup —Ñ–∞–π–ª–∏

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ backup (RotatingFileHandler)

#### `bot.log.1` –¥–æ `bot.log.10`

**–©–æ —Ü–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ backup —Ñ–∞–π–ª–∏ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –ª–æ–≥—É

**–ö–æ–ª–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è:**
- –ö–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É –∫–æ–ª–∏ `bot.log` –¥–æ—Å—è–≥–∞—î 10MB
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ RotatingFileHandler

**–ù—É–º–µ—Ä–∞—Ü—ñ—è:**
```
bot.log      - –ü–æ—Ç–æ—á–Ω–∏–π —Ñ–∞–π–ª (0 - 10MB)
bot.log.1    - –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π (10MB) ‚Üê –Ω–∞–π—Å–≤—ñ–∂—ñ—à–∏–π backup
bot.log.2    - –©–µ —Å—Ç–∞—Ä—ñ—à–∏–π (10MB)
bot.log.3    - ...
bot.log.10   - –ù–∞–π—Å—Ç–∞—Ä—ñ—à–∏–π (10MB) ‚Üê –≤–∏–¥–∞–ª–∏—Ç—å—Å—è –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Ä–æ—Ç–∞—Ü—ñ—ó
```

**–†–æ–∑–º—ñ—Ä –∫–æ–∂–Ω–æ–≥–æ:** –î–æ 10MB  
**–í—Å—å–æ–≥–æ –º–æ–∂–µ –±—É—Ç–∏:** –î–æ 110MB (10MB –ø–æ—Ç–æ—á–Ω–∏–π + 10√ó10MB backups)

**–ü—Ä–∏–∫–ª–∞–¥:**
```bash
# –ü–æ—Ç–æ—á–Ω–∞ —Å–∏—Ç—É–∞—Ü—ñ—è:
-rw-r--r-- 1 root root  13K Oct  1 16:26 bot.log       # –ê–∫—Ç–∏–≤–Ω–∏–π
-rw-r--r-- 1 root root  35M Oct  1 16:15 bot.log.1     # –°—Ç–∞—Ä–∏–π backup (–±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–∏–π –ø—Ä–∏ cleanup)
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** `bot.log.1` (35MB) –∑–∞–ª–∏—à–∏–≤—Å—è –∑—ñ —Å—Ç–∞—Ä–æ—ó —Å–∏—Å—Ç–µ–º–∏, –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–∏–π –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É cleanup –∞–±–æ –≤—Ä—É—á–Ω—É.

#### `webhook.log.1` –¥–æ `webhook.log.5`

**–©–æ —Ü–µ:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ backup —Ñ–∞–π–ª–∏ webhook –ª–æ–≥—É

**–ö–æ–ª–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è:**
- –ö–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É –∫–æ–ª–∏ `webhook.log` –¥–æ—Å—è–≥–∞—î 5MB

**–ù—É–º–µ—Ä–∞—Ü—ñ—è:**
```
webhook.log      - –ü–æ—Ç–æ—á–Ω–∏–π —Ñ–∞–π–ª (0 - 5MB)
webhook.log.1    - –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π (5MB)
webhook.log.2    - –°—Ç–∞—Ä—ñ—à–∏–π (5MB)
webhook.log.3    - ...
webhook.log.5    - –ù–∞–π—Å—Ç–∞—Ä—ñ—à–∏–π (5MB)
```

**–†–æ–∑–º—ñ—Ä –∫–æ–∂–Ω–æ–≥–æ:** –î–æ 5MB  
**–í—Å—å–æ–≥–æ –º–æ–∂–µ –±—É—Ç–∏:** –î–æ 30MB (5MB –ø–æ—Ç–æ—á–Ω–∏–π + 5√ó5MB backups)

---

## üîß –°–ª—É–∂–±–æ–≤—ñ —Ñ–∞–π–ª–∏

### 3. `bot.lock`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –§–∞–π–ª –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –¥–ª—è –∑–∞–ø–æ–±—ñ–≥–∞–Ω–Ω—è –º–Ω–æ–∂–∏–Ω–Ω–∏–º –∑–∞–ø—É—Å–∫–∞–º –±–æ—Ç–∞

**–©–æ –º—ñ—Å—Ç–∏—Ç—å:**
```
1748875
```
(PID –ø—Ä–æ—Ü–µ—Å—É –±–æ—Ç–∞)

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
1. –ü—Ä–∏ –∑–∞–ø—É—Å–∫—É –±–æ—Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ñ–∞–π–ª—É
2. –Ø–∫—â–æ —Ñ–∞–π–ª —ñ—Å–Ω—É—î —ñ –ø—Ä–æ—Ü–µ—Å –∞–∫—Ç–∏–≤–Ω–∏–π ‚Üí –ø–æ–º–∏–ª–∫–∞
3. –Ø–∫—â–æ —Ñ–∞–π–ª —ñ—Å–Ω—É—î –∞–ª–µ –ø—Ä–æ—Ü–µ—Å –Ω–µ –∞–∫—Ç–∏–≤–Ω–∏–π ‚Üí –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è
4. –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π lock –∑ –ø–æ—Ç–æ—á–Ω–∏–º PID

**–§–∞–π–ª:** `src/main.py`
```python
LOCK_FILE = 'logs/bot.lock'

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –±–ª–æ–∫—É–≤–∞–Ω–Ω—è
with open(LOCK_FILE, 'r') as f:
    old_pid = int(f.read().strip())
    if is_process_running(old_pid):
        raise RuntimeError("Bot already running")
```

**–†–æ–∑–º—ñ—Ä:** 7 bytes  
**–í–∏–¥–∞–ª—è—î—Ç—å—Å—è:** –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ –±–æ—Ç–∞ –∞–±–æ force-kill

**–í–∞–∂–ª–∏–≤–æ:** –ù–µ –≤–∏–¥–∞–ª—è–π—Ç–µ —Ü–µ–π —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É —è–∫—â–æ –±–æ—Ç –ø—Ä–∞—Ü—é—î!

---

### 4. `restart.lock`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –§–∞–π–ª –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –¥–ª—è —Å–∫—Ä–∏–ø—Ç—É restart.sh

**–©–æ –º—ñ—Å—Ç–∏—Ç—å:**
```
1745532
```
(PID –ø—Ä–æ—Ü–µ—Å—É restart)

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**
- –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É `restart.sh`
- –ó–∞–ø–æ–±—ñ–≥–∞—î –æ–¥–Ω–æ—á–∞—Å–Ω–∏–º –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º
- –í–∏–¥–∞–ª—è—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è restart

**–†–æ–∑–º—ñ—Ä:** 11 bytes  
**–¢–∏–º—á–∞—Å–æ–≤–∏–π:** –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ —á–∞—Å restart, –ø–æ—Ç—ñ–º –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è

---

### 5. `monitor.log`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –õ–æ–≥ —Å–∫—Ä–∏–ø—Ç—É –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Ä–æ–∑–º—ñ—Ä—É –ª–æ–≥—ñ–≤

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è `monitor_logs_size.sh`
- –ü–æ—Ç–æ—á–Ω–∏–π —Ä–æ–∑–º—ñ—Ä logs/ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó
- –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—è –ª—ñ–º—ñ—Ç—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∞–π–ª—ñ–≤

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```bash
# Crontab:
0 */6 * * * /home/Bot1/scripts/monitor_logs_size.sh >> /home/Bot1/logs/monitor.log 2>&1
```

**–†—ñ–≤–µ–Ω—å –ª–æ–≥—É–≤–∞–Ω–Ω—è:** INFO, WARNING, CRITICAL  
**–§–æ—Ä–º–∞—Ç:**
```
=== Log Size Monitoring ===
Date: Wed Oct  1 04:04:41 PM UTC 2025

üìä Current logs directory size: 70MB
   Warning threshold: 50MB
   Critical threshold: 100MB

üü† WARNING: Logs size exceeded 50MB
   Consider running cleanup or archiving soon
```

**–ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø–∏—Å—ñ–≤:** –ö–æ–∂–Ω—ñ 6 –≥–æ–¥–∏–Ω (4 —Ä–∞–∑–∏ –Ω–∞ –¥–µ–Ω—å)  
**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä:** ~1-2 MB/–º—ñ—Å—è—Ü—å

**–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É:** 869 KB (–ø–æ—Ç–æ—á–Ω–∏–π - –≤–µ–ª–∏–∫–∞ —ñ—Å—Ç–æ—Ä—ñ—è)  
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è:** –ú–æ–∂–Ω–∞ –æ—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –∑–∞–ø–∏—Å–∏

---

### 6. `cleanup.log`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –õ–æ–≥ —Å–∫—Ä–∏–ø—Ç—É –æ—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö —Ñ–∞–π–ª—ñ–≤

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è `cleanup_old_logs.sh`
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ —Ç–∞ –ø—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```bash
# Crontab:
0 2 * * * /home/Bot1/scripts/cleanup_old_logs.sh >> /home/Bot1/logs/cleanup.log 2>&1
```

**–§–æ—Ä–º–∞—Ç:**
```
=== Log Cleanup Script ===
Date: Wed Oct  1 04:13:24 PM UTC 2025
Cleaning logs older than 7 days...

Found 6 old log files to delete
‚úì Deleted old bot_001_*.log files
‚úì Deleted old webhook_001_*.log files

=== Summary ===
Current logs directory size: 70M
Current log files count: 63

‚úÖ Cleanup completed successfully
```

**–ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø–∏—Å—ñ–≤:** –©–æ–¥–Ω—è –æ 2:00 AM  
**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä:** ~100-200 KB/–º—ñ—Å—è—Ü—å

**–§–∞–π–ª –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ:** –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É cron job (—Å—å–æ–≥–æ–¥–Ω—ñ –≤–Ω–æ—á—ñ)

---

### 7. `archive_script.log`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –õ–æ–≥ —Å–∫—Ä–∏–ø—Ç—É –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—ó –ª–æ–≥—ñ–≤

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è `archive_logs.sh`
- –°–ø–∏—Å–æ–∫ —Å—Ç–∏—Å–Ω—É—Ç–∏—Ö —Ñ–∞–π–ª—ñ–≤
- –ö—ñ–ª—å–∫—ñ—Å—Ç—å –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —Å—Ç–∞—Ä–∏—Ö –∞—Ä—Ö—ñ–≤—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–æ–∑–º—ñ—Ä—É –∞—Ä—Ö—ñ–≤—ñ–≤

**–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è:**
```bash
# Crontab:
0 3 * * * /home/Bot1/scripts/archive_logs.sh >> /home/Bot1/logs/archive_script.log 2>&1
```

**–§–æ—Ä–º–∞—Ç:**
```
=== Log Archiving Script ===
Date: Wed Oct  1 03:00:00 AM UTC 2025
Compressing logs older than 7 days...

Found 3 backup files to compress
  ‚úì Archived: bot.log.5 ‚Üí bot.log.5_20251001.gz
  ‚úì Archived: bot.log.6 ‚Üí bot.log.6_20251001.gz
  ‚úì Archived: bot.log.7 ‚Üí bot.log.7_20251001.gz

Deleting archives older than 30 days...
  ‚úì Deleted 2 old archives

=== Summary ===
Archive directory size: 15M
Archive files count: 18
Total logs directory size: 25M

‚úÖ Archiving completed successfully
```

**–ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø–∏—Å—ñ–≤:** –©–æ–¥–Ω—è –æ 3:00 AM  
**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä:** ~100-200 KB/–º—ñ—Å—è—Ü—å

**–§–∞–π–ª –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ:** –ü—Ä–∏ –ø–µ—Ä—à–æ–º—É –∑–∞–ø—É—Å–∫—É cron job (—Å—å–æ–≥–æ–¥–Ω—ñ –≤–Ω–æ—á—ñ)

---

## üóÑÔ∏è –ê—Ä—Ö—ñ–≤–Ω—ñ –ª–æ–≥–∏

### –î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è `archive/`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–∏—Å–Ω—É—Ç–∏—Ö —Å—Ç–∞—Ä–∏—Ö –ª–æ–≥—ñ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
logs/archive/
‚îú‚îÄ‚îÄ bot.log.1_20250920.gz
‚îú‚îÄ‚îÄ bot.log.2_20250919.gz
‚îú‚îÄ‚îÄ bot.log.3_20250918.gz
‚îú‚îÄ‚îÄ webhook.log.1_20250925.gz
‚îî‚îÄ‚îÄ ...
```

**–§–æ—Ä–º–∞—Ç –Ω–∞–∑–≤ —Ñ–∞–π–ª—ñ–≤:**
```
{original_filename}_{date}.gz
```

**–©–æ —Å—Ç–∏—Å–∫–∞—î—Ç—å—Å—è:**
- Backup —Ñ–∞–π–ª–∏ `*.log.[0-9]*` —Å—Ç–∞—Ä—à—ñ 7 –¥–Ω—ñ–≤
- Compression ratio: ~80% (gzip)

**–¢–µ—Ä–º—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è:** 30 –¥–Ω—ñ–≤  
**–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è:** –§–∞–π–ª–∏ —Å—Ç–∞—Ä—à—ñ 30 –¥–Ω—ñ–≤ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è

**–Ø–∫ —Ä–æ–∑–∞—Ä—Ö—ñ–≤—É–≤–∞—Ç–∏:**
```bash
# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤–º—ñ—Å—Ç
zcat logs/archive/bot.log.1_20251001.gz | tail -100

# –†–æ–∑–∞—Ä—Ö—ñ–≤—É–≤–∞—Ç–∏
gunzip logs/archive/bot.log.1_20251001.gz

# –†–æ–∑–∞—Ä—Ö—ñ–≤—É–≤–∞—Ç–∏ –∑—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º .gz
gunzip -c logs/archive/bot.log.1_20251001.gz > bot.log.1_20251001
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä:** 10-20 MB (–¥–ª—è 30 –¥–Ω—ñ–≤ —ñ—Å—Ç–æ—Ä—ñ—ó)

---

## ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è

### Cron Jobs

–í—Å—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø—Ä–æ—Ü–µ—Å–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ —á–µ—Ä–µ–∑ crontab:

```bash
# –ü–µ—Ä–µ–≥–ª—è–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
crontab -l

# Telegram Bot - Log Management
0 2 * * * /home/Bot1/scripts/cleanup_old_logs.sh >> /home/Bot1/logs/cleanup.log 2>&1
0 3 * * * /home/Bot1/scripts/archive_logs.sh >> /home/Bot1/logs/archive_script.log 2>&1
0 */6 * * * /home/Bot1/scripts/monitor_logs_size.sh >> /home/Bot1/logs/monitor.log 2>&1
```

### –†–æ–∑–∫–ª–∞–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

| –ß–∞—Å | –°–∫—Ä–∏–ø—Ç | –î—ñ—è | –ß–∞—Å—Ç–æ—Ç–∞ |
|-----|--------|-----|---------|
| 02:00 AM | `cleanup_old_logs.sh` | –í–∏–¥–∞–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö —Ñ–∞–π–ª—ñ–≤ | –©–æ–¥–Ω—è |
| 03:00 AM | `archive_logs.sh` | –ê—Ä—Ö—ñ–≤–∞—Ü—ñ—è –≤ .gz | –©–æ–¥–Ω—è |
| 00:00, 06:00, 12:00, 18:00 | `monitor_logs_size.sh` | –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ | –ö–æ–∂–Ω—ñ 6 –≥–æ–¥–∏–Ω |

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ cleanup
tail -50 /home/Bot1/logs/cleanup.log

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ archiving
tail -50 /home/Bot1/logs/archive_script.log

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ monitoring
tail -50 /home/Bot1/logs/monitor.log
```

---

## üìä –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —Å–∏—Å—Ç–µ–º–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–Ω–æ–º –Ω–∞ 01.10.2025:

```
–ó–∞–≥–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä logs/:        36 MB
–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ñ–∞–π–ª—ñ–≤:               6 –∞–∫—Ç–∏–≤–Ω–∏—Ö

–ê–∫—Ç–∏–≤–Ω—ñ –ª–æ–≥–∏:
- bot.log:                      13 KB
- bot.log.1:                    35 MB (—Å—Ç–∞—Ä–∏–π, –±—É–¥–µ –≤–∏–¥–∞–ª–µ–Ω–∏–π)
- webhook.log:                  17 KB
- bot.lock:                     7 bytes
- restart.lock:                 11 bytes
- monitor.log:                  869 KB
```

### –ü—ñ—Å–ª—è cleanup (–æ—á—ñ–∫—É—î—Ç—å—Å—è —Å—å–æ–≥–æ–¥–Ω—ñ –æ 2:00 AM):

```
–ó–∞–≥–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä:               ~2 MB
–ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ñ–∞–π–ª—ñ–≤:               4-6

–ó–∞–ª–∏—à–∞—Ç—å—Å—è:
- bot.log                       (–∞–∫—Ç–∏–≤–Ω–∏–π)
- webhook.log                   (–∞–∫—Ç–∏–≤–Ω–∏–π)
- bot.lock                      (—Å–ª—É–∂–±–æ–≤–∏–π)
- cleanup.log                   (–Ω–æ–≤–∏–π)
- archive_script.log           (–Ω–æ–≤–∏–π)
- monitor.log                   (–±—É–¥–µ –æ—á–∏—â–µ–Ω–æ)
```

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### –©–æ –ü–û–¢–†–Ü–ë–ù–û —Ä–æ–±–∏—Ç–∏:

1. ‚úÖ **–ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä –ª–æ–≥—ñ–≤**
   ```bash
   # –†—É—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
   /home/Bot1/scripts/monitor_logs_size.sh
   ```

2. ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ cron jobs**
   ```bash
   # –©–æ—Ç–∏–∂–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —â–æ –ø—Ä–∞—Ü—é—î
   tail -20 /home/Bot1/logs/cleanup.log
   tail -20 /home/Bot1/logs/archive_script.log
   ```

3. ‚úÖ **–û—á–∏—â–∞—Ç–∏ –º–æ–Ω—ñ—Ç–æ—Ä –ª–æ–≥ —Ä–∞–∑ –Ω–∞ –º—ñ—Å—è—Ü—å**
   ```bash
   # –ó–∞–ª–∏—à–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –æ—Å—Ç–∞–Ω–Ω—ñ 1000 —Ä—è–¥–∫—ñ–≤
   tail -1000 /home/Bot1/logs/monitor.log > /tmp/monitor.log
   mv /tmp/monitor.log /home/Bot1/logs/monitor.log
   ```

4. ‚úÖ **–ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –∞—Ä—Ö—ñ–≤–∏**
   ```bash
   # –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—å —â–æ –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
   ls -lh /home/Bot1/logs/archive/
   ```

### –©–æ –ù–ï –ü–û–¢–†–Ü–ë–ù–û —Ä–æ–±–∏—Ç–∏:

1. ‚ùå **–ù–µ –≤–∏–¥–∞–ª—è—Ç–∏ bot.log –∞–±–æ webhook.log –≤—Ä—É—á–Ω—É**
   - –¶—ñ —Ñ–∞–π–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è
   - RotatingFileHandler –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—Ä—É—î –Ω–∏–º–∏

2. ‚ùå **–ù–µ –≤–∏–¥–∞–ª—è—Ç–∏ bot.lock –ø—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –±–æ—Ç–∞**
   - –¶–µ –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö –∑–∞–ø—É—Å–∫—ñ–≤
   - –í–∏–¥–∞–ª—è—Ç–∏ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –±–æ—Ç –Ω–µ –ø—Ä–∞—Ü—é—î

3. ‚ùå **–ù–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ñ–æ—Ä–º–∞—Ç –Ω–∞–∑–≤ —Ñ–∞–π–ª—ñ–≤**
   - –°–∫—Ä–∏–ø—Ç–∏ –æ—á—ñ–∫—É—é—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ —à–∞–±–ª–æ–Ω–∏
   - `bot.log`, `webhook.log` - —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ –Ω–∞–∑–≤–∏

4. ‚ùå **–ù–µ –≤–∏–¥–∞–ª—è—Ç–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é archive/**
   - –í –Ω—ñ–π –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —ñ—Å—Ç–æ—Ä—ñ—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ—á–∏—â–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î

### –©–æ –º–æ–∂–Ω–∞ —Ä–æ–±–∏—Ç–∏:

1. ‚úì **–ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ**
   ```bash
   tail -f /home/Bot1/logs/bot.log
   tail -f /home/Bot1/logs/webhook.log
   ```

2. ‚úì **–®—É–∫–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏**
   ```bash
   grep ERROR /home/Bot1/logs/bot.log
   grep WARNING /home/Bot1/logs/webhook.log
   ```

3. ‚úì **–ê–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É**
   ```bash
   # –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–¥—ñ–π
   grep "jira:issue_updated" /home/Bot1/logs/webhook.log | wc -l
   
   # –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–º–∏–ª–æ–∫
   grep ERROR /home/Bot1/logs/bot.log | wc -l
   ```

4. ‚úì **–°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ backup –ø–µ—Ä–µ–¥ –≤–∞–∂–ª–∏–≤–∏–º–∏ –∑–º—ñ–Ω–∞–º–∏**
   ```bash
   # Backup –ø–æ—Ç–æ—á–Ω–∏—Ö –ª–æ–≥—ñ–≤
   tar -czf logs_backup_$(date +%Y%m%d).tar.gz logs/
   ```

---

## üîç Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏ –Ω–µ —Ä–æ—Ç—É—é—Ç—å—Å—è

**–°–∏–º–ø—Ç–æ–º:** `bot.log` –±—ñ–ª—å—à–µ 10MB, –∞–ª–µ –Ω–µ–º–∞—î `bot.log.1`

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —â–æ –±–æ—Ç –ø—Ä–∞—Ü—é—î
ps aux | grep "python.*main.py"

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
cd /home/Bot1
./restart.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: Cron jobs –Ω–µ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è

**–°–∏–º–ø—Ç–æ–º:** –ù–µ–º–∞—î `cleanup.log` –∞–±–æ `archive_script.log`

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ crontab
crontab -l | grep -E "cleanup|archive|monitor"

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ cron
grep CRON /var/log/syslog | tail -20

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Ä—É—á–Ω—É
/home/Bot1/scripts/cleanup_old_logs.sh
/home/Bot1/scripts/archive_logs.sh
```

### –ü—Ä–æ–±–ª–µ–º–∞: –î–∏—Å–∫ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π

**–°–∏–º–ø—Ç–æ–º:** `monitor.log` –ø–æ–∫–∞–∑—É—î CRITICAL

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ cleanup –≤—Ä—É—á–Ω—É
/home/Bot1/scripts/cleanup_old_logs.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∞—Ä—Ö—ñ–≤–∞—Ü—ñ—é
/home/Bot1/scripts/archive_logs.sh

# 3. –í–∏–¥–∞–ª–∏—Ç–∏ –¥—É–∂–µ —Å—Ç–∞—Ä–∏–π bot.log.1 (35MB)
rm /home/Bot1/logs/bot.log.1

# 4. –û—á–∏—Å—Ç–∏—Ç–∏ monitor.log
echo "" > /home/Bot1/logs/monitor.log
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –º–æ–∂—É –∑–Ω–∞–π—Ç–∏ —Å—Ç–∞—Ä–∏–π –ª–æ–≥

**–°–∏–º–ø—Ç–æ–º:** –ü–æ—Ç—Ä—ñ–±–µ–Ω –ª–æ–≥ –∑–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –¥–∞—Ç—É

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤–∏
ls -lh /home/Bot1/logs/archive/ | grep "20250920"

# 2. –†–æ–∑–∞—Ä—Ö—ñ–≤—É–≤–∞—Ç–∏
zcat /home/Bot1/logs/archive/bot.log.3_20250920.gz | grep "ERROR"

# 3. –Ø–∫—â–æ —Å—Ç–∞—Ä—ñ—à–µ 30 –¥–Ω—ñ–≤ - –∞—Ä—Ö—ñ–≤—É –≤–∂–µ –Ω–µ–º–∞—î
# –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Å–∏—Å—Ç–µ–º–Ω—ñ backups —è–∫—â–æ —î
```

---

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- **–ü–ª–∞–Ω –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó:** `reports/LOG_OPTIMIZATION_PLAN_20251001.md`
- **–ó–≤—ñ—Ç –ø—Ä–æ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è:** `reports/LOG_OPTIMIZATION_IMPLEMENTATION_20251001.md`
- **–ö–æ–¥ –ª–æ–≥—É–≤–∞–Ω–Ω—è:** `src/main.py`, `src/jira_webhooks2.py`

### –°–∫—Ä–∏–ø—Ç–∏

- **Cleanup:** `scripts/cleanup_old_logs.sh`
- **Archive:** `scripts/archive_logs.sh`
- **Monitor:** `scripts/monitor_logs_size.sh`

### –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –†–æ–∑–º—ñ—Ä –≤—Å—ñ—Ö –ª–æ–≥—ñ–≤
du -sh /home/Bot1/logs

# –¢–æ–ø-5 –Ω–∞–π–±—ñ–ª—å—à–∏—Ö —Ñ–∞–π–ª—ñ–≤
du -ah /home/Bot1/logs | sort -rh | head -5

# –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ª–æ–≥—ñ–≤ –∑–∞ –æ—Å—Ç–∞–Ω–Ω—é –≥–æ–¥–∏–Ω—É
grep "$(date -d '1 hour ago' '+%Y-%m-%d %H')" /home/Bot1/logs/bot.log | wc -l

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ ERROR
grep ERROR /home/Bot1/logs/bot.log | tail -20

# –û—Å—Ç–∞–Ω–Ω—ñ webhook –ø–æ–¥—ñ—ó
tail -50 /home/Bot1/logs/webhook.log | grep "–û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ—ó"
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Å–∏—Å—Ç–µ–º–æ—é –ª–æ–≥—É–≤–∞–Ω–Ω—è:

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ü—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é
2. –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∑–≤—ñ—Ç–∏ –≤ `reports/`
3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ `monitor_logs_size.sh` –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ `cleanup.log` —Ç–∞ `archive_script.log`

---

**–í–µ—Ä—Å—ñ—è –¥–æ–∫—É–º–µ–Ω—Ç—É:** 1.0  
**–û—Å—Ç–∞–Ω–Ω—î –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 01.10.2025  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞
